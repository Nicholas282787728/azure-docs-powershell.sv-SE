---
title: Migrera Azure PowerShell-skript från AzureRM till Az
description: Läs om stegen och verktygen för att migrera skript från AzureRM-modulen till den nya Az-modulen.
author: sptramer
ms.author: sttramer
manager: carmonm
ms.devlang: powershell
ms.topic: conceptual
ms.date: 12/13/2018
ms.openlocfilehash: 28122ca953d62b405f19effbbc680f2dc6202cca
ms.sourcegitcommit: 43f4bdf2a59dd82fd881512aa9761bf72eb5703c
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 04/23/2019
ms.locfileid: "63068871"
---
# <a name="migrate-from-azurerm-to-azure-powershell-az"></a><span data-ttu-id="900f1-103">Migrera från AzureRM till Azure PowerShell Az</span><span class="sxs-lookup"><span data-stu-id="900f1-103">Migrate from AzureRM to Azure PowerShell Az</span></span>

<span data-ttu-id="900f1-104">Az-modulen har funktionsparitet med AzureRM, men använder kortare och mer konsekventa cmdlet-namn.</span><span class="sxs-lookup"><span data-stu-id="900f1-104">The Az module has feature parity with AzureRM, but uses shorter and more consistent cmdlet names.</span></span>
<span data-ttu-id="900f1-105">Skript som har skrivits för AzureRM-cmdletarna fungerar inte automatiskt med den nya modulen.</span><span class="sxs-lookup"><span data-stu-id="900f1-105">Scripts written for the AzureRM cmdlets won't automatically work with the new module.</span></span> <span data-ttu-id="900f1-106">För att underlätta övergången erbjuder Az verktyg så att du kan köra dina befintliga skript med hjälp av AzureRM.</span><span class="sxs-lookup"><span data-stu-id="900f1-106">To make the transition easier, Az offers tools to allow you to run your existing scripts using AzureRM.</span></span> <span data-ttu-id="900f1-107">Ingen migrering till en ny kommandouppsättning är någonsin läglig, men i den här artikeln får du hjälp att komma igång med övergången till den nya modulen.</span><span class="sxs-lookup"><span data-stu-id="900f1-107">No migration to a new command set is ever convenient, but this article will help you get started on transitioning to the new module.</span></span>

<span data-ttu-id="900f1-108">En fullständig lista över icke-bakåtkompatibla ändringar mellan AzureRM och Az finns i [Migreringsguiden för Az 1.0.0](migrate-az-1.0.0.md)</span><span class="sxs-lookup"><span data-stu-id="900f1-108">To see the full list of breaking changes between AzureRM and Az, see the [Migration guide for Az 1.0.0](migrate-az-1.0.0.md)</span></span>

## <a name="check-for-installed-versions-of-azurerm"></a><span data-ttu-id="900f1-109">Sök efter installerade versioner av AzureRM</span><span class="sxs-lookup"><span data-stu-id="900f1-109">Check for installed versions of AzureRM</span></span>

<span data-ttu-id="900f1-110">Az-modulen kan vara installerad samtidigt som AzureRM-modulen, men detta rekommenderas inte.</span><span class="sxs-lookup"><span data-stu-id="900f1-110">The Az module can be installed side-by-side with the AzureRM module, but this is not recommended.</span></span> <span data-ttu-id="900f1-111">Innan du påbörjar migreringen bör du kontrollera vilka versioner av AzureRM som finns installerade på datorn.</span><span class="sxs-lookup"><span data-stu-id="900f1-111">Before taking any migration steps, check which versions of AzureRM are installed on your system.</span></span> <span data-ttu-id="900f1-112">Då kan du se till att skripten redan körs med den senaste versionen, och du ser om det går att aktivera kommandoalias utan att avinstallera AzureRM.</span><span class="sxs-lookup"><span data-stu-id="900f1-112">Doing so allows you to make sure scripts are already running on the latest release, and let you know if you can enable command aliases without uninstalling AzureRM.</span></span>

<span data-ttu-id="900f1-113">Om du vill kontrollera vilka versioner av AzureRM du har installerade kör du följande kommando:</span><span class="sxs-lookup"><span data-stu-id="900f1-113">To check which version(s) of AzureRM you have installed, run the command:</span></span>

```powershell-interactive
Get-InstalledModule -Name AzureRM -AllVersions
```

## <a name="ensure-your-existing-scripts-work-with-the-latest-azurerm-release"></a><span data-ttu-id="900f1-114">Se till att dina befintliga skript fungerar med den senaste versionen av AzureRM</span><span class="sxs-lookup"><span data-stu-id="900f1-114">Ensure your existing scripts work with the latest AzureRM release</span></span>

<span data-ttu-id="900f1-115">Det här är det viktigaste steget!</span><span class="sxs-lookup"><span data-stu-id="900f1-115">This is the most important step!</span></span> <span data-ttu-id="900f1-116">Kör dina befintliga skript och se till att de fungerar med den _senaste_ versionen av AzureRM (__6.13.1__).</span><span class="sxs-lookup"><span data-stu-id="900f1-116">Run your existing scripts, and make sure that they work with the _latest_ release of AzureRM (__6.13.1__).</span></span> <span data-ttu-id="900f1-117">Om dina skript inte fungerar läser du [AzureRM-migreringsguiden](/powershell/azure/azurerm/migration-guide.6.0.0).</span><span class="sxs-lookup"><span data-stu-id="900f1-117">If your scripts don't work, make sure to read the [AzureRM migration guide](/powershell/azure/azurerm/migration-guide.6.0.0).</span></span>

## <a name="install-the-azure-powershell-az-module"></a><span data-ttu-id="900f1-118">Installera Azure PowerShell Az-modulen</span><span class="sxs-lookup"><span data-stu-id="900f1-118">Install the Azure PowerShell Az module</span></span>

<span data-ttu-id="900f1-119">Första steget är att installera Az-modulen på din plattform.</span><span class="sxs-lookup"><span data-stu-id="900f1-119">The first step is to install the Az module on your platform.</span></span> <span data-ttu-id="900f1-120">När du installerar Az bör du avinstallera AzureRM.</span><span class="sxs-lookup"><span data-stu-id="900f1-120">When you install Az, it's recommended that you uninstall AzureRM.</span></span> <span data-ttu-id="900f1-121">I följande steg får du lära dig hur du fortsätter att köra dina befintliga skript och aktiverar kompatibilitet för gamla cmdlet-namn.</span><span class="sxs-lookup"><span data-stu-id="900f1-121">In the following steps, you'll learn how to keep running your existing scripts and enable compatibility for old cmdlet names.</span></span>

<span data-ttu-id="900f1-122">Installera Azure PowerShell Az-modulen enligt följande:</span><span class="sxs-lookup"><span data-stu-id="900f1-122">To install the Azure PowerShell Az module, follow these steps:</span></span>

* <span data-ttu-id="900f1-123">__REKOMMENDERAS__: [Avinstallera AzureRM-modulen](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span><span class="sxs-lookup"><span data-stu-id="900f1-123">__RECOMMENDED__: [Uninstall the AzureRM module](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span></span>
  <span data-ttu-id="900f1-124">Se till att ta bort _alla_ installerade versioner av AzureRM, inte bara den senaste versionen.</span><span class="sxs-lookup"><span data-stu-id="900f1-124">Make sure that you remove _all_ installed versions of AzureRM, not just the most recent version.</span></span>
* [<span data-ttu-id="900f1-125">Installera Az-modulen</span><span class="sxs-lookup"><span data-stu-id="900f1-125">Install the Az module</span></span>](install-az-ps.md)

## <a name="a-namealiasesenable-azurerm-compatibility-aliases"></a><span data-ttu-id="900f1-126"><a name="aliases"/>Aktivera AzureRM-kompatibilitetsalias</span><span class="sxs-lookup"><span data-stu-id="900f1-126"><a name="aliases"/>Enable AzureRM compatibility aliases</span></span> 

> [!IMPORTANT]
>
> <span data-ttu-id="900f1-127">Aktivera kompatibilitetsläge endast om du har avinstallerat _alla_ versioner av AzureRM.</span><span class="sxs-lookup"><span data-stu-id="900f1-127">Only enable compatibility mode if you've uninstalled _all_ versions of AzureRM.</span></span> <span data-ttu-id="900f1-128">Om du aktiverar kompatibilitetsläge när det fortfarande finns tillgängliga AzureRM-cmdletar kan du få oväntade resultat.</span><span class="sxs-lookup"><span data-stu-id="900f1-128">Enabling compatibility mode with AzureRM cmdlets still available may result in unpredictable behavior.</span></span> <span data-ttu-id="900f1-129">Hoppa över det här steget om du väljer att behålla AzureRM installerat, men tänk på att alla AzureRM-cmdletar kommer att använda de äldre modulerna och inte anropa några Az-cmdletar.</span><span class="sxs-lookup"><span data-stu-id="900f1-129">Skip this step if you decided to keep AzureRM installed, but be aware that any AzureRM cmdlets will use the older modules and not call any Az cmdlets.</span></span>

<span data-ttu-id="900f1-130">När AzureRM har avinstallerats och skripten fungerar med den senaste AzureRM-versionen är nästa steg att aktivera kompatibilitetsläget för Az-modulen.</span><span class="sxs-lookup"><span data-stu-id="900f1-130">With AzureRM uninstalled and your scripts working with the latest AzureRM version, the next step is to enable the compatibility mode for the Az module.</span></span> <span data-ttu-id="900f1-131">Kompatibilitet aktiveras med kommandot:</span><span class="sxs-lookup"><span data-stu-id="900f1-131">Compatibility is enabled with the command:</span></span>

```powershell-interactive
Enable-AzureRmAlias -Scope CurrentUser
```

<span data-ttu-id="900f1-132">Alias gör det möjligt att använda äldre cmdlet-namn med Az-modulen installerad.</span><span class="sxs-lookup"><span data-stu-id="900f1-132">Aliases enable the ability to use old cmdlet names with the Az module installed.</span></span> <span data-ttu-id="900f1-133">Dessa alias skrivs till användarprofilen för det valda omfånget.</span><span class="sxs-lookup"><span data-stu-id="900f1-133">These aliases are written to the user profile for the selected scope.</span></span> <span data-ttu-id="900f1-134">Om det inte finns någon användarprofil skapas en.</span><span class="sxs-lookup"><span data-stu-id="900f1-134">If no user profile exists, one is created.</span></span>

> [!WARNING]
>
> <span data-ttu-id="900f1-135">Du kan använda ett annat `-Scope` för det här kommandot, men det rekommenderas inte.</span><span class="sxs-lookup"><span data-stu-id="900f1-135">You can use a different `-Scope` for this command, but it's not recommended.</span></span> <span data-ttu-id="900f1-136">Alias skrivs till användarprofilen för det valda omfånget, så fortsätt att aktivera dem för ett så begränsat omfång som möjligt.</span><span class="sxs-lookup"><span data-stu-id="900f1-136">Aliases are written to the user profile for the selected scope, so keep enabling them to as limited a scope as possible.</span></span> <span data-ttu-id="900f1-137">Aktivering av alias i hela systemet kan också orsaka problem för andra användare som har AzureRM installerat i sitt lokala omfång.</span><span class="sxs-lookup"><span data-stu-id="900f1-137">Enabling aliases system-wide could also cause issues for other users which have AzureRM installed in their local scope.</span></span>

<span data-ttu-id="900f1-138">När aliasläget har aktiverats kör du skripten igen för att bekräfta att de fortfarande fungerar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="900f1-138">Once the alias mode is enabled, run your scripts again to confirm that they still function as expected.</span></span> 

## <a name="change-module-imports-and-cmdlet-names"></a><span data-ttu-id="900f1-139">Ändra modulimporter och cmdlet-namn</span><span class="sxs-lookup"><span data-stu-id="900f1-139">Change module imports and cmdlet names</span></span>

<span data-ttu-id="900f1-140">I allmänhet har modulnamnen ändrats så att `AzureRM` och `Azure` blir `Az`, och samma sak för cmdletar.</span><span class="sxs-lookup"><span data-stu-id="900f1-140">In general, the module names have been changed so that `AzureRM` and `Azure` become `Az`, and the same for cmdlets.</span></span>
<span data-ttu-id="900f1-141">`AzureRM.Compute`-modulens namn har till exempel ändrats till `Az.Compute`.</span><span class="sxs-lookup"><span data-stu-id="900f1-141">For example, the `AzureRM.Compute` module has been renamed to `Az.Compute`.</span></span> <span data-ttu-id="900f1-142">`New-AzureRMVM` har blivit `New-AzVM`, och `Get-AzureStorageBlob` är nu `Get-AzStorageBlob`.</span><span class="sxs-lookup"><span data-stu-id="900f1-142">`New-AzureRMVM` has become `New-AzVM`, and `Get-AzureStorageBlob` is now `Get-AzStorageBlob`.</span></span>

<span data-ttu-id="900f1-143">Det finns undantag för den här namngivningsändringen som du bör känna till.</span><span class="sxs-lookup"><span data-stu-id="900f1-143">There are exceptions to this naming change that you should be aware of.</span></span> <span data-ttu-id="900f1-144">Vissa moduler har bytt namn eller slagits samman till befintliga modeller utan att det påverkar suffixet för deras cmdletar, förutom att `AzureRM` eller `Azure` ändras till `Az`.</span><span class="sxs-lookup"><span data-stu-id="900f1-144">Some modules were renamed or merged into existing modules without this affecting the suffix of their cmdlets, other than changing `AzureRM` or `Azure` to `Az`.</span></span> <span data-ttu-id="900f1-145">I övrigt ändras det fullständiga cmdlet-suffixet så att det återspeglar det nya modulnamnet.</span><span class="sxs-lookup"><span data-stu-id="900f1-145">Otherwise, the full cmdlet suffix was changed to reflect the new module name.</span></span>

| <span data-ttu-id="900f1-146">AzureRM-modul</span><span class="sxs-lookup"><span data-stu-id="900f1-146">AzureRM module</span></span> | <span data-ttu-id="900f1-147">Az-modul</span><span class="sxs-lookup"><span data-stu-id="900f1-147">Az module</span></span> | <span data-ttu-id="900f1-148">Ändrat cmdlet-suffix?</span><span class="sxs-lookup"><span data-stu-id="900f1-148">Cmdlet suffix changed?</span></span> |
|----------------|-----------|------------------------|
| <span data-ttu-id="900f1-149">AzureRM.Profile</span><span class="sxs-lookup"><span data-stu-id="900f1-149">AzureRM.Profile</span></span> | <span data-ttu-id="900f1-150">Az.Accounts</span><span class="sxs-lookup"><span data-stu-id="900f1-150">Az.Accounts</span></span> | <span data-ttu-id="900f1-151">Ja</span><span class="sxs-lookup"><span data-stu-id="900f1-151">Yes</span></span> |
| <span data-ttu-id="900f1-152">AzureRM.Insights</span><span class="sxs-lookup"><span data-stu-id="900f1-152">AzureRM.Insights</span></span> | <span data-ttu-id="900f1-153">Az.Monitor</span><span class="sxs-lookup"><span data-stu-id="900f1-153">Az.Monitor</span></span> | <span data-ttu-id="900f1-154">Ja</span><span class="sxs-lookup"><span data-stu-id="900f1-154">Yes</span></span> |
| <span data-ttu-id="900f1-155">AzureRM.DataFactories</span><span class="sxs-lookup"><span data-stu-id="900f1-155">AzureRM.DataFactories</span></span> | <span data-ttu-id="900f1-156">Az.DataFactory</span><span class="sxs-lookup"><span data-stu-id="900f1-156">Az.DataFactory</span></span> | <span data-ttu-id="900f1-157">Ja</span><span class="sxs-lookup"><span data-stu-id="900f1-157">Yes</span></span> |
| <span data-ttu-id="900f1-158">AzureRM.DataFactoryV2</span><span class="sxs-lookup"><span data-stu-id="900f1-158">AzureRM.DataFactoryV2</span></span> | <span data-ttu-id="900f1-159">Az.DataFactory</span><span class="sxs-lookup"><span data-stu-id="900f1-159">Az.DataFactory</span></span> | <span data-ttu-id="900f1-160">Ja</span><span class="sxs-lookup"><span data-stu-id="900f1-160">Yes</span></span> |
| <span data-ttu-id="900f1-161">AzureRM.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="900f1-161">AzureRM.RecoveryServices.Backup</span></span> | <span data-ttu-id="900f1-162">Az.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="900f1-162">Az.RecoveryServices</span></span> | <span data-ttu-id="900f1-163">Nej</span><span class="sxs-lookup"><span data-stu-id="900f1-163">No</span></span> |
| <span data-ttu-id="900f1-164">AzureRM.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="900f1-164">AzureRM.RecoveryServices.SiteRecovery</span></span> | <span data-ttu-id="900f1-165">Az.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="900f1-165">Az.RecoveryServices</span></span> | <span data-ttu-id="900f1-166">Nej</span><span class="sxs-lookup"><span data-stu-id="900f1-166">No</span></span> |
| <span data-ttu-id="900f1-167">AzureRM.Tags</span><span class="sxs-lookup"><span data-stu-id="900f1-167">AzureRM.Tags</span></span> | <span data-ttu-id="900f1-168">Az.Resources</span><span class="sxs-lookup"><span data-stu-id="900f1-168">Az.Resources</span></span> | <span data-ttu-id="900f1-169">Nej</span><span class="sxs-lookup"><span data-stu-id="900f1-169">No</span></span> |
| <span data-ttu-id="900f1-170">AzureRM.MachineLearningCompute</span><span class="sxs-lookup"><span data-stu-id="900f1-170">AzureRM.MachineLearningCompute</span></span> | <span data-ttu-id="900f1-171">Az.MachineLearning</span><span class="sxs-lookup"><span data-stu-id="900f1-171">Az.MachineLearning</span></span> | <span data-ttu-id="900f1-172">Nej</span><span class="sxs-lookup"><span data-stu-id="900f1-172">No</span></span> |
| <span data-ttu-id="900f1-173">AzureRM.UsageAggregates</span><span class="sxs-lookup"><span data-stu-id="900f1-173">AzureRM.UsageAggregates</span></span> | <span data-ttu-id="900f1-174">Az.Billing</span><span class="sxs-lookup"><span data-stu-id="900f1-174">Az.Billing</span></span> | <span data-ttu-id="900f1-175">Nej</span><span class="sxs-lookup"><span data-stu-id="900f1-175">No</span></span> |
| <span data-ttu-id="900f1-176">AzureRM.Consumption</span><span class="sxs-lookup"><span data-stu-id="900f1-176">AzureRM.Consumption</span></span> | <span data-ttu-id="900f1-177">Az.Billing</span><span class="sxs-lookup"><span data-stu-id="900f1-177">Az.Billing</span></span> | <span data-ttu-id="900f1-178">Nej</span><span class="sxs-lookup"><span data-stu-id="900f1-178">No</span></span> |

## <a name="summary"></a><span data-ttu-id="900f1-179">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="900f1-179">Summary</span></span>

<span data-ttu-id="900f1-180">Genom att följa de här stegen kan du uppdatera alla befintliga skript så att de använder den nya modulen.</span><span class="sxs-lookup"><span data-stu-id="900f1-180">By following these steps, you can update all of your existing scripts to use the new module.</span></span> <span data-ttu-id="900f1-181">Om du har några frågor eller problem med de här stegen som har gjort migreringen svår får du gärna kommentera den här artikeln så att vi kan förbättra instruktionerna.</span><span class="sxs-lookup"><span data-stu-id="900f1-181">If you have any questions or problems with these steps that made your migration difficult, please comment on this article so that we can improve the instructions.</span></span>
