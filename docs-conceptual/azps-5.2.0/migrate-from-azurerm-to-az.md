---
title: Migrera Azure PowerShell-skript från AzureRM till Az
description: Lär dig vilka steg du följer och vilka verktyg du använder för att migrera Azure PowerShell-skript från AzureRM till den nya Az PowerShell-modulen.
ms.devlang: powershell
ms.service: azure-powershell
ms.topic: conceptual
ms.date: 12/15/2020
ms.custom: devx-track-azurepowershell, contperf-fy21q2
ms.openlocfilehash: 6bccaf9a628f67b8945516bae70f07939cdce8f7
ms.sourcegitcommit: a24069b411d3a6011067770430b6dcdd4b2c2159
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 12/16/2020
ms.locfileid: "97532250"
---
# <a name="migrate-azure-powershell-from-azurerm-to-az"></a><span data-ttu-id="0e0c2-103">Migrera Azure PowerShell från AzureRM till Az</span><span class="sxs-lookup"><span data-stu-id="0e0c2-103">Migrate Azure PowerShell from AzureRM to Az</span></span>

<span data-ttu-id="0e0c2-104">Alla versioner av AzureRM PowerShell-modulen är inaktuella.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-104">All versions of the AzureRM PowerShell module are outdated.</span></span> <span data-ttu-id="0e0c2-105">[Az PowerShell-modulen](install-az-ps.md) är nu den rekommenderade PowerShell-modulen för att interagera med Azure.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-105">The [Az PowerShell module](install-az-ps.md) is now the recommended PowerShell module for interacting with Azure.</span></span>

## <a name="why-a-new-module"></a><span data-ttu-id="0e0c2-106">Varför en ny modul?</span><span class="sxs-lookup"><span data-stu-id="0e0c2-106">Why a new module?</span></span>

<span data-ttu-id="0e0c2-107">Den största och viktigaste ändringen är att [PowerShell](/powershell/scripting/overview), som baseras på .NET Standard-biblioteket, har varit en plattformsoberoende produkt från första början.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-107">The biggest and most important change is that [PowerShell](/powershell/scripting/overview), being based on the .NET Standard library, has been a cross-platform product since its introduction.</span></span>

<span data-ttu-id="0e0c2-108">Precis som med PowerShell-språket är vår ambition att alla plattformar ska ha stöd för Azure.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-108">Like the PowerShell language, we're committed to bringing Azure support to all platforms.</span></span> <span data-ttu-id="0e0c2-109">Därför behövde vi uppdatera Azure PowerShell-modulerna så att de använder .NET Standard och är kompatibla med PowerShell Core.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-109">Our commitment meant that the Azure PowerShell modules needed to be updated to use .NET Standard and be compatible with PowerShell Core.</span></span> <span data-ttu-id="0e0c2-110">I stället för att göra omfattande ändringar i den befintliga AzureRM-modulen valde vi att skapa Az-modulen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-110">Rather than modifying the existing AzureRM module and introducing complex changes to add this support, the Az module was created.</span></span>

<span data-ttu-id="0e0c2-111">Utvecklingen av en ny modul innebar dessutom att våra ingenjörer kunde skapa en enhetlig design och namnge cmdlets och moduler på ett konsekvent sätt.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-111">Creating a new module also allowed our engineers to make the design, naming of cmdlets, and modules consistent.</span></span> <span data-ttu-id="0e0c2-112">Alla moduler börjar nu med `Az.`-prefixet och alla cmdlets använder `Verb-AzNoun`-namngivningskonventionen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-112">All modules now start with the `Az.` prefix and cmdlets all use the `Verb-AzNoun` naming convention.</span></span> <span data-ttu-id="0e0c2-113">Tidigare var namnen på cmdlets längre och inkonsekventa.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-113">Previously, cmdlet names were longer and inconsistent.</span></span>

<span data-ttu-id="0e0c2-114">Antalet moduler har också reducerats: Vissa moduler som fungerade med samma tjänster har slagits ihop.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-114">The number of modules were also reduced: Some modules that worked with the same services have been combined.</span></span> <span data-ttu-id="0e0c2-115">Nu finns cmdlets för hanterings- och dataplanet för samma tjänst i en enda modul.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-115">Management plane and data plane cmdlets for the same service are now contained within a single module.</span></span> <span data-ttu-id="0e0c2-116">För dig som manuellt hanterar beroenden och importer blir allt mycket enklare med den här konsolideringen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-116">For those of you who manually manage dependencies and imports, this consolidation makes things much simpler.</span></span>

<span data-ttu-id="0e0c2-117">Dessa viktiga ändringar gör det enklare än någonsin att använda Azure med PowerShell-cmdlets, på alla plattformar.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-117">By making these important changes, the team has committed to making it easier than ever before and on more platforms than previously possible to use Azure with PowerShell cmdlets.</span></span>

## <a name="upgrading-to-az-powershell"></a><span data-ttu-id="0e0c2-118">Uppgradera till Az PowerShell</span><span class="sxs-lookup"><span data-stu-id="0e0c2-118">Upgrading to Az PowerShell</span></span>

<span data-ttu-id="0e0c2-119">Skript som har skrivits för AzureRM-cmdlets fungerar inte automatiskt med Az.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-119">Scripts written for the AzureRM cmdlets won't automatically work with Az.</span></span> <span data-ttu-id="0e0c2-120">För att underlätta övergången utvecklades [verktyg för migrering från AzureRM till AZ](https://github.com/Azure/azure-powershell-migration).</span><span class="sxs-lookup"><span data-stu-id="0e0c2-120">To make the transition easier, the [AzureRM to Az migration toolkit](https://github.com/Azure/azure-powershell-migration) was developed.</span></span> <span data-ttu-id="0e0c2-121">Ingen migrering till en ny kommandouppsättning är någonsin läglig, men i den här artikeln får du hjälp att komma igång med övergången till Az PowerShell-modulen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-121">No migration to a new command set is ever convenient, but this article will help you get started on transitioning to the Az PowerShell module.</span></span> <span data-ttu-id="0e0c2-122">Mer information om varför Az PowerShell-modulen skapades finns i [Introduktion till den nya Azure PowerShell Az-modulen](new-azureps-module-az.md).</span><span class="sxs-lookup"><span data-stu-id="0e0c2-122">To learn more about why the Az PowerShell module was created, see [Introducing the new Azure PowerShell Az module](new-azureps-module-az.md).</span></span>

<span data-ttu-id="0e0c2-123">De nya cmdlet-namnen har utformats för att vara lätta att lära sig.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-123">The new cmdlet names have been designed to be easy to learn.</span></span> <span data-ttu-id="0e0c2-124">I stället för att använda `AzureRm` eller `Azure` i cmdlet-namn använder du `Az`.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-124">Instead of using `AzureRm` or `Azure` in cmdlet names, use `Az`.</span></span> <span data-ttu-id="0e0c2-125">Till exempel har den gamla cmdleten `New-AzureRMVm` blivit `New-AzVm`.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-125">For example, the old cmdlet `New-AzureRMVm` has become `New-AzVm`.</span></span>
<span data-ttu-id="0e0c2-126">Migreringen handlar dock inte bara om att bekanta sig med nya cmdlet-namn.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-126">However, migration is more than just becoming familiar with the new cmdlet names, though.</span></span> <span data-ttu-id="0e0c2-127">Det finns omdöpta moduler, parametrar och andra viktiga ändringar.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-127">There are renamed modules, parameters, and other important changes.</span></span>

<span data-ttu-id="0e0c2-128">En fullständig lista över icke-bakåtkompatibla ändringar mellan AzureRM och Az finns i de [fullständiga ändringarna från AzureRM till Az](migrate-az-1.0.0.md).</span><span class="sxs-lookup"><span data-stu-id="0e0c2-128">To see the full list of breaking changes between AzureRM and Az, see the [full changes from AzureRM to Az](migrate-az-1.0.0.md).</span></span>

## <a name="ensure-existing-scripts-work-with-the-latest-azurerm-release"></a><span data-ttu-id="0e0c2-129">Se till att befintliga skript fungerar med den senaste versionen av AzureRM</span><span class="sxs-lookup"><span data-stu-id="0e0c2-129">Ensure existing scripts work with the latest AzureRM release</span></span>

<span data-ttu-id="0e0c2-130">Innan du påbörjar migreringen bör du kontrollera vilka versioner av AzureRM som finns installerade på datorn.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-130">Before taking any migration steps, check which versions of AzureRM are installed on your system.</span></span>
<span data-ttu-id="0e0c2-131">Du kan då se till att skripten redan körs med den senaste versionen, och du ser vilka versioner av AzureRM som behöver avinstalleras.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-131">Doing so allows you to make sure scripts are already running on the latest release and let you know which versions of AzureRM must be uninstalled.</span></span>

<span data-ttu-id="0e0c2-132">Om du vill kontrollera vilka versioner av AzureRM du har installerade kör du följande exempel:</span><span class="sxs-lookup"><span data-stu-id="0e0c2-132">To check which version(s) of AzureRM you have installed, run the following example:</span></span>

```azurepowershell
Get-Module -Name AzureRM -ListAvailable -All
```

<span data-ttu-id="0e0c2-133">Den **senaste** tillgängliga versionen av AzureRM är **6.13.1**.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-133">The **latest** available release of AzureRM is **6.13.1**.</span></span> <span data-ttu-id="0e0c2-134">Om du inte har den här versionen kan de befintliga skripten behöva ytterligare modifieringar för att de ska fungera med Az-modulen, förutom det som beskrivs i den här artikeln och i [listan över icke-bakåtkompatibla ändringar](migrate-az-1.0.0.md).</span><span class="sxs-lookup"><span data-stu-id="0e0c2-134">If you don't have this version installed, your existing scripts may need additional modifications to work with the Az module beyond the scope of what's described in this article and in the [breaking changes list](migrate-az-1.0.0.md).</span></span>

<span data-ttu-id="0e0c2-135">Om skripten inte fungerar med AzureRM 6.13.1 uppdaterar du dem enligt [migreringsguiden för AzureRM 5.x till 6.x](/powershell/azure/azurerm/migration-guide.6.0.0).</span><span class="sxs-lookup"><span data-stu-id="0e0c2-135">If your scripts don't work with AzureRM 6.13.1, update them according to the [AzureRM 5.x to 6.x migration guide](/powershell/azure/azurerm/migration-guide.6.0.0).</span></span> <span data-ttu-id="0e0c2-136">Om du använder en tidigare version av AzureRM-modulen finns det migreringsguider för varje större version.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-136">If you use an earlier version of the AzureRM module, there are migration guides available for each major version.</span></span>

## <a name="option-1-recommended-automatically-migrate-your-powershell-scripts"></a><span data-ttu-id="0e0c2-137">Alternativ 1 (rekommenderas): Migrera PowerShell-skript automatiskt</span><span class="sxs-lookup"><span data-stu-id="0e0c2-137">Option 1 (recommended): Automatically migrate your PowerShell scripts</span></span>

<span data-ttu-id="0e0c2-138">Det här rekommenderade alternativet minimerar arbetet med att migrera AzureRM-skript till Az.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-138">This recommended option minimizes the effort required to migrate AzureRM scripts to Az.</span></span>

### <a name="install-the-azurerm-to-az-migration-toolkit"></a><span data-ttu-id="0e0c2-139">Installera verktygen för migrering från AzureRM till Az</span><span class="sxs-lookup"><span data-stu-id="0e0c2-139">Install the AzureRM to Az migration toolkit</span></span>

```azurepowershell
Install-Module -Name Az.Tools.Migration
```

### <a name="convert-your-scripts-automatically"></a><span data-ttu-id="0e0c2-140">Konvertera dina skript automatiskt</span><span class="sxs-lookup"><span data-stu-id="0e0c2-140">Convert your scripts automatically</span></span>

<span data-ttu-id="0e0c2-141">Med verktygen för migrering från AzureRM till Az kan du skapa en plan för att bestämma vilka ändringar som ska utföras för dina skript innan du ändrar dem och innan du installerar Az PowerShell-modulen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-141">With the AzureRM to Az migration toolkit, you can generate a plan to determine what changes will be performed on your scripts before making any modifications to them and before installing the Az PowerShell module.</span></span>

<span data-ttu-id="0e0c2-142">Snabbstarten [Migrera PowerShell-skript automatiskt från AzureRM till Az PowerShell-modulen](quickstart-migrate-azurerm-to-az-automatically.md) vägleder dig genom hela processen med att uppdatera PowerShell-skript automatiskt från AzureRM till Az PowerShell-modulen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-142">The [Automatically migrate PowerShell scripts from AzureRM to the Az PowerShell module](quickstart-migrate-azurerm-to-az-automatically.md) quickstart walks you through the entire process of automatically updating your PowerShell scripts from AzureRM to the Az PowerShell module.</span></span>

## <a name="option-2-use-compatibility-mode-with-enable-azurermalias"></a><span data-ttu-id="0e0c2-143">Alternativ 2: Använd kompatibilitetsläge med Enable-AzureRmAlias</span><span class="sxs-lookup"><span data-stu-id="0e0c2-143">Option 2: Use compatibility mode with Enable-AzureRmAlias</span></span>

<span data-ttu-id="0e0c2-144">Az-modulen har ett kompatibilitetsläge för befintliga skript medan du arbetar med uppdateringar till den nya syntaxen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-144">The Az module has a compatibility mode to help you use existing scripts while you update to the new syntax.</span></span> <span data-ttu-id="0e0c2-145">Cmdleten [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) aktiverar ett kompatibilitetsläge via alias.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-145">The [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) cmdlet enables a compatibility mode through aliases.</span></span> <span data-ttu-id="0e0c2-146">Det här läget gör att du kan använda befintliga skript med minimal modifiering under tiden som du migrerar till Az.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-146">This mode allows you to use existing scripts with minimal modification while working towards a full migration to Az.</span></span> <span data-ttu-id="0e0c2-147">Som standard aktiverar `Enable-AzureRmAlias` bara kompatibilitetsalias för den aktuella PowerShell-sessionen.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-147">By default, `Enable-AzureRmAlias` only enables compatibility aliases for the current PowerShell session.</span></span> <span data-ttu-id="0e0c2-148">Använd dess `Scope`-parameter om du vill bevara kompatibilitetsalias mellan PowerShell-sessioner.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-148">Use its `Scope` parameter to persist compatibility aliases across PowerShell sessions.</span></span> <span data-ttu-id="0e0c2-149">Mer information finns i [referensdokumentation för Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias).</span><span class="sxs-lookup"><span data-stu-id="0e0c2-149">For more information, see [the Enable-AzureRmAlias reference documentation](/powershell/module/az.accounts/enable-azurermalias).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0e0c2-150">Även om cmdlet-namnen har alias kan det finnas nya (eller omdöpta) parametrar och ändrade returvärden för Az-cmdletar.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-150">Even though the cmdlet names are aliased, there may still be new (or renamed) parameters or changed return values for the Az cmdlets.</span></span> <span data-ttu-id="0e0c2-151">Tro inte att migreringen är klappad och klar bara för att du aktiverar alias!</span><span class="sxs-lookup"><span data-stu-id="0e0c2-151">Don't expect enabling aliases to take care of the migration for you!</span></span> <span data-ttu-id="0e0c2-152">I den [fullständiga listan över icke-bakåtkompatibla ändringar](migrate-az-1.0.0.md) ser du var skripten kan kräva uppdateringar.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-152">See the [full breaking changes list](migrate-az-1.0.0.md) to find where your scripts may require updates.</span></span>

## <a name="option-3-migrate-your-scripts-in-visual-studio-code-with-the-azure-powershell-extension"></a><span data-ttu-id="0e0c2-153">Alternativ 3: Migrera dina skript i Visual Studio Code med Azure PowerShell-tillägget</span><span class="sxs-lookup"><span data-stu-id="0e0c2-153">Option 3: Migrate your scripts in Visual Studio Code with the Azure PowerShell extension</span></span>

### <a name="install-the-azure-powershell-extension-for-visual-studio-code"></a><span data-ttu-id="0e0c2-154">Installera Azure PowerShell-tillägget för Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="0e0c2-154">Install the Azure PowerShell extension for Visual Studio Code</span></span>

<span data-ttu-id="0e0c2-155">Installera [Azure PowerShell-tillägget för VSCode](https://marketplace.visualstudio.com/items?itemName=azps-tools.azps-tools)</span><span class="sxs-lookup"><span data-stu-id="0e0c2-155">Install the [Azure PowerShell extension for VSCode](https://marketplace.visualstudio.com/items?itemName=azps-tools.azps-tools)</span></span>

### <a name="convert-your-scripts-manually"></a><span data-ttu-id="0e0c2-156">Konvertera dina skript manuellt</span><span class="sxs-lookup"><span data-stu-id="0e0c2-156">Convert your scripts manually</span></span>

1. <span data-ttu-id="0e0c2-157">Läs in ditt AzureRM-skript i VSCode</span><span class="sxs-lookup"><span data-stu-id="0e0c2-157">Load your AzureRM script in VSCode</span></span>
2. <span data-ttu-id="0e0c2-158">Starta migreringen genom att öppna kommandopaletten `Ctrl+Shift+P` och välja `Migrate Azure PowerShell script`</span><span class="sxs-lookup"><span data-stu-id="0e0c2-158">Start the migration by opening the command palette `Ctrl+Shift+P` and select `Migrate Azure PowerShell script`</span></span>
3. <span data-ttu-id="0e0c2-159">Välj källversionen `AzureRM`</span><span class="sxs-lookup"><span data-stu-id="0e0c2-159">Select source version `AzureRM`</span></span>
4. <span data-ttu-id="0e0c2-160">Följ de rekommenderade åtgärderna för alla understrukna kommandon eller parametrar.</span><span class="sxs-lookup"><span data-stu-id="0e0c2-160">Follow the recommended actions for each underlined command or parameter.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0e0c2-161">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="0e0c2-161">Next steps</span></span>

* [<span data-ttu-id="0e0c2-162">Avinstallera AzureRM</span><span class="sxs-lookup"><span data-stu-id="0e0c2-162">Uninstall AzureRM</span></span>](uninstall-az-ps.md#uninstall-the-azurerm-module)
* [<span data-ttu-id="0e0c2-163">Installera Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="0e0c2-163">Install Azure PowerShell</span></span>](install-az-ps.md)
